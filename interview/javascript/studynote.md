# JavaScript - Study Note

## 변수의 선언, 초기화, 할당

선언 -> 초기화 -> 할당

**변수의 선언 (Variable Declaration)**
- 변수를 메모리에 등록하는 과정
- `var`, `let`, `const` 키워드로 수행
  
**변수의 초기화 (Variable Initialization)**
- 메모리에 등록된 변수에 기본값을 설정하는 과정
- `va`r → 자동으로 `undefined`로 초기화 (호이스팅 시)
- `let / const` → 코드 실행 시점에 초기화 (TDZ 종료 시점)

**변수의 할당 (Variable Assignment)**
- 변수에 값을 대입하는 과정
- 선언과 동시에 또는 나중에 할당 가능

## `var`, `let`, `const`

| 키워드 | 스코프 | 호이스팅 시 초기값 | 재선언 | 재할당 |
| ------ | ------ | ------------------ | ------ | ------ |
| var    | 함수   | undefined          | 가능   | 가능   |
| let    | 블록   | 없음 (TDZ)         | 불가능 | 가능   |
| const  | 블록   | 없음 (TDZ)         | 불가능 | 불가능 |

## 스코프

- 함수 스코프: 변수가 함수 내부에서만 유효하며, 블록 스코프는 무시 (if, for 등)
- 블록 스코프: 변수가 선언된 블록 `{}` 내부에서만 유효
- 렉시컬 스코프: 함수가 **선언** 된 위치에 따라 **변수의 유효 범위(스코프)** 가 결정되는 규칙


## 실행 컨텍스트

- 실행 컨텍스트는 자바스크립트 코드가 실행되는 환경 객체

### 구성 요소

**변수 객체 (Variable Environment / Lexical Environment)**

선언된 변수, 함수, 매개변수 정보를 저장

**스코프 체인 (Scope Chain)**

현재 컨텍스트와 외부 환경 간의 변수 참조 관계

**this 바인딩**

해당 실행 컨텍스트에서 `this`가 참조하는 객체

## 호이스팅

- 자바스크립트 엔진이 코드 실행 전에 변수, 함수 등을 실행 컨텍스트의 메모리에 등록하는 동작

### TDZ (Temporal Dead Zone)
- 변수가 호이스팅은 되었지만 아직 초기화 되지 않아 접근할 수 없는 구간
- 이 구간에서 변수를 참조하면 `ReferenceError` 가 발생


## 렉시컬 스코프와 클로저

### 렉시컬 스코프 (Lexical Scope)

- 렉시컬 스코프는 함수의 선언 위치에 따라 변수의 유효 범위가 결정 되는 스코프
- 함수가 호출되는 위치는 스코프 결정에 영향을 주지 않음
- 함수가 정의된 위치의 외부 환경을 기억
  - 예를 들어, 함수안에 함수가 선언된 경우, 안의 함수는 전역 컨텍스트를 참조하는 것이 아니라 바깥 함수의 컨텍스트를 참조
- **자바스크립트는 렉시컬 스코프 기반 언어**

### 클로저 (Closure)

- 함수가 선언될 당시의 외부 환경을 기억하고, 그 함수가 외부 스코프 밖에서 실행되더라도 계속 접근할 수 있는 기능을 말함

#### 동작 원리
- 렉시컬 스포크 덕분에 함수는 선언 시점의 스코프 체인을 함께 저장
- 외부 함수가 종료되어도, 내부 함수가 참조하는 변수는 GC (Garbage Collection) 대상에서 제외되어 계속 유효함

```js
function counter() {
  let count = 0;
  return function () {
    count++;
    console.log(count);
  };
}

const inc = counter();
inc(); // 1
inc(); // 2

```