## 6.1 함수 추출하기 (Extract Function)

### 배경

- 함수라고 표현했지만 객체 지향 언어의 메서드나 절차형 언어의 프로시저/서브루틴에도 똑같이 적용된다.
- 코드를 언제 독립된 함수로 묶어야 할지에 관한 의견은 수없이 많지만, 필자는 **목적과 구현을 분리**하는 방식을 가장 합리적인 기준으로 본다.
  - 코드를 보고 무슨 일을 하는지 파악하는데 한참이 걸린다면 그 부분을 함수로 추출한다.
- 필자는 이 원칙을 적용한 뒤로 함수를 아주 짧게, 대체로 단 몇 줄만 담도록 작성하는 습관이 생겼다. (5-6줄을 넘지 않게)
- 예시: 화면에서 텍스트를 강조하기 위해 사용하는 `highlight()` 메서드가 있었는데, 실제 구현 코드는 `reverse()`라는 메서드만 호출하고 있었다. 구현 코드가 단 한 줄이어도 _highlight_ 이라는 이름이 훨씬 텍스트 강조를 뜻하는 이름으로 적합하다.

### 절차

1. 함수를 새로 만들고 **목적**을 잘 드러내는 이름을 붙인다. (어떻게가 아니라 `무엇을` 하는지가 드러나야 한다.)

   - 함수로 뽑아서 목적이 더 잘 드러나는 이름을 붙일 수 있다면 추출한다.
   - 그러나 이름이 떠오르지 않는다면 대체로 함수로 추출하면 안된다는 신호이다.

2. 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여넣는다.
3. 추출한 코드 중 원본 함수의 지역 변수를 참조하는 등 매개변수로 넘겨줘야 할 변수가 있는지 확인한다.
   - 매개변수로 넘겨야할 지역 변수가 너무 많다면, `변수 쪼개기(9.1절)` 이나 `임시변수를 질의 함수로 바꾸기(7.4절)` 등을 적용하여 코드를 단순하게 바꿔본다.
4. 함수 추출이 끝났다면 컴파일 함으로서 제대로 처리했는지 확인한다.
5. 기존의 함수 자리에 새로 만든 함수를 호출하는 문장으로 바꾼다.
6. 테스트 한다.
7. 다른 코드에 방금 추출한 것과 같거나 비슷한 코드가 없는지 확인한다.
